/* style.css - Optimized */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

:root {
    --bg-color: #FDFDFD;
    --main-color: #FFD400;
    --text-color: #212121;
    --accent-color: #F94344;
    --card-bg-color: #FFFFFF;
    --subtle-gray: #f0f2f5;
    --like-color: #F94344;
    --dislike-color: #3c5ee1;
    --visited-color: #fcc419;
    --shadow-light: 0 4px 12px rgba(0,0,0,0.1);
    --shadow-medium: 0 8px 24px rgba(0,0,0,0.15);
    --shadow-heavy: 0 12px 32px rgba(0,0,0,0.2);
    --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-medium: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    --swipe-duration: 0.4s;
    --swipe-easing: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --spring-easing: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Reset & Base */
* { 
    box-sizing: border-box; 
    -webkit-tap-highlight-color: transparent; 
}

html, body { 
    height: 100%; 
    margin: 0; 
    padding: 0; 
    overflow: hidden; 
}

body { 
    font-family: 'Inter', sans-serif; 
    background-color: var(--bg-color); 
    color: var(--text-color); 
    -webkit-font-smoothing: antialiased; 
    position: relative; 
    transition: background-color 0.6s ease-in-out;
}

/* Theme Variations */
body.theme-planning {
    --main-color: #007AFF;
    overflow: hidden;
}

/* オープニング画面の先進的なスタイル */
.animated-gradient-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(-45deg, #ffd93d, #ffed4e, #ffc107, #ffb347, #ffd93d);
    background-size: 400% 400%;
    animation: gradient-shift 8s ease-in-out infinite;
    z-index: -1;
}

@keyframes gradient-shift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

.hero-section {
    text-align: center;
    margin-bottom: 60px;
    animation: hero-fade-in 1.2s ease-out;
}

@keyframes hero-fade-in {
    0% {
        opacity: 0;
        transform: translateY(30px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.hero-title {
    font-size: 48px;
    font-weight: 900;
    margin: 0 0 16px 0;
    background: linear-gradient(135deg, #333, #666);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    letter-spacing: -1px;
}

.hero-subtitle {
    font-size: 18px;
    color: #666;
    margin: 0;
    font-weight: 400;
    opacity: 0.9;
}

.search-section {
    width: 100%;
    max-width: 400px;
    animation: search-fade-in 1.2s ease-out 0.3s both;
}

@keyframes search-fade-in {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.search-label {
    display: block;
    font-size: 20px;
    font-weight: 600;
    color: #333;
    margin-bottom: 20px;
    text-align: center;
}

.search-container {
    margin-bottom: 30px;
}

.search-input-wrapper {
    position: relative;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50px;
    padding: 4px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: input-pulse 2s ease-in-out infinite;
}

@keyframes input-pulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    50% {
        transform: scale(1.02);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }
}

.search-input-wrapper:focus-within {
    transform: scale(1.05);
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.2);
    background: rgba(255, 255, 255, 0.95);
}

.animated-search-input {
    width: 100%;
    padding: 16px 50px 16px 20px;
    border: none;
    background: transparent;
    font-size: 16px;
    color: #333;
    outline: none;
    border-radius: 50px;
}

.animated-search-input::placeholder {
    color: #999;
    font-weight: 400;
}

.search-icon {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    color: #666;
    transition: all 0.3s ease;
}

.search-input-wrapper:focus-within .search-icon {
    color: #007AFF;
    transform: translateY(-50%) scale(1.1);
}

.animated-start-button {
    position: relative;
    width: 100%;
    padding: 18px 32px;
    background: linear-gradient(135deg, #007AFF, #0056b3);
    border: none;
    border-radius: 50px;
    color: white;
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
}

.animated-start-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 32px rgba(0, 122, 255, 0.4);
}

.animated-start-button:active {
    transform: translateY(0);
    box-shadow: 0 4px 16px rgba(0, 122, 255, 0.3);
}

.button-text {
    position: relative;
    z-index: 2;
}

.button-glow {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s ease;
}

.animated-start-button:hover .button-glow {
    left: 100%;
}

/* スワイプ画面の洗練されたスタイル */
#swipe-screen main {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
    position: relative;
}

.swipe-header {
    text-align: center;
    margin-bottom: 20px;
    animation: hero-fade-in 1s ease-out;
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    width: 100%;
    max-width: 360px;
}

.swipe-title {
    font-size: 24px;
    font-weight: 700;
    margin: 0 0 8px 0;
    background: linear-gradient(135deg, #333, #666);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.swipe-subtitle {
    font-size: 14px;
    color: #666;
    margin: 0;
    font-weight: 400;
    opacity: 0.9;
}

/* チェックイン画面の洗練されたスタイル */
.check-in-content {
    text-align: center;
    animation: hero-fade-in 1s ease-out;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
}

.check-in-info {
    margin: 30px 0;
}

.check-in-title {
    font-size: 32px;
    font-weight: 700;
    margin: 0 0 8px 0;
    background: linear-gradient(135deg, #333, #666);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.check-in-subtitle {
    font-size: 18px;
    color: #666;
    margin: 0;
    font-weight: 400;
    opacity: 0.9;
}

.check-in-actions {
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center;
}

.secondary-button-modern {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50px;
    padding: 16px 32px;
    color: #333;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    backdrop-filter: blur(10px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.secondary-button-modern:hover {
    background: rgba(255, 255, 255, 0.95);
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

/* 決定画面の洗練されたスタイル */
.decision-header {
    text-align: center;
    margin-bottom: 30px;
    animation: hero-fade-in 1s ease-out;
}

.decision-title {
    font-size: 28px;
    font-weight: 700;
    margin: 0 0 8px 0;
    background: linear-gradient(135deg, #333, #666);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.decision-subtitle {
    font-size: 16px;
    color: #666;
    margin: 0;
    font-weight: 400;
    opacity: 0.9;
}

/* スワイプ終了画面の洗練されたスタイル */
.end-swipe-content {
    text-align: center;
    animation: hero-fade-in 1s ease-out;
}

.icon-display-modern {
    margin-bottom: 30px;
    color: #007AFF;
    filter: drop-shadow(0 4px 8px rgba(0, 122, 255, 0.3));
}

.end-swipe-info {
    margin-bottom: 40px;
}

.end-swipe-title {
    font-size: 28px;
    font-weight: 700;
    margin: 0 0 8px 0;
    background: linear-gradient(135deg, #333, #666);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.end-swipe-subtitle {
    font-size: 16px;
    color: #666;
    margin: 0;
    font-weight: 400;
    opacity: 0.9;
}

.end-swipe-actions {
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center;
}

body.theme-discovery {
    background-color: #FFF9E6;
}

/* Planning Theme Button Styles */
body.theme-planning .main-button {
    color: #FFFFFF;
    background: linear-gradient(to right, #007AFF, #0056b3);
    box-shadow: 0 4px 15px rgba(0, 122, 255, 0.3);
}

body.theme-planning .main-button:hover {
    box-shadow: 0 6px 20px rgba(0, 122, 255, 0.4);
}

body.theme-planning .main-button:active {
    box-shadow: 0 2px 10px rgba(0, 122, 255, 0.2);
}

/* Screen Transitions */
.screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    opacity: 0;
    transform: scale(1.03) translateY(20px);
    transition: opacity var(--transition-slow), transform var(--transition-slow);
    pointer-events: none;
    z-index: 1;
    will-change: opacity, transform;
}

.screen.is-active {
    opacity: 1;
    transform: scale(1) translateY(0);
    pointer-events: auto;
    z-index: 10;
}

/* Layout */
main { 
    flex: 1; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    position: relative; 
    padding: 20px; 
    padding-bottom: 90px;
    overflow-y: auto; 
}

/* Card Styles */
.card-area { 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    width: 100%; 
    height: 100%; 
    position: relative; 
    touch-action: pan-x pan-y; 
    padding-top: 80px;
    padding-bottom: 120px;
}

.card { 
    width: 85vw; 
    max-width: 360px; 
    height: 65vh; 
    background: rgba(255, 255, 255, 0.95); 
    border-radius: 20px; 
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15); 
    overflow: hidden; 
    display: flex; 
    flex-direction: column; 
    position: absolute; 
    opacity: 0; 
    transform: translateY(20px) scale(0.95); 
    transition: transform var(--transition-slow) cubic-bezier(0.25, 0.8, 0.25, 1), opacity var(--transition-slow) ease-out; 
    cursor: grab; 
    user-select: none; 
    touch-action: pan-x pan-y; 
    will-change: transform, opacity; 
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.card:active { 
    cursor: grabbing; 
}

.card.swiping {
    transition: none;
}

.card.swipe-out {
    transition: transform var(--swipe-duration) var(--swipe-easing), opacity var(--swipe-duration) var(--swipe-easing);
}

.card-image { 
    width: 100%; 
    aspect-ratio: 4/3; 
    background-size: cover; 
    background-position: center; 
    position: relative; 
    flex-shrink: 0; 
}

.card-content-wrapper { 
    flex: 1; 
    display: flex; 
    flex-direction: column; 
    min-height: 0; 
}

.card .info-area { 
    padding: 16px; 
    flex-shrink: 0; 
    overflow-y: auto; 
}

.card .info-area-with-map { 
    padding-bottom: 8px; 
}

.card .spot-name { 
    font-size: 22px; 
    font-weight: 700; 
    margin: 0 0 8px 0; 
}

.card .details { 
    display: flex; 
    align-items: center; 
    gap: 12px; 
    font-size: 14px; 
    color: #555; 
    margin-bottom: 12px; 
}

.card .tags { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 6px; 
    margin-bottom: 12px; 
}

.card .tag { 
    background-color: var(--subtle-gray); 
    color: #555; 
    padding: 4px 8px; 
    border-radius: 12px; 
    font-size: 12px; 
}

.card .ugc-quote { 
    font-size: 13px; 
    color: #808080; 
    border-left: 3px solid #ddd; 
    padding-left: 12px; 
    margin-top: 12px; 
}

.congestion-info { 
    position: absolute; 
    top: 12px; 
    right: 12px; 
    padding: 5px 10px; 
    border-radius: 12px; 
    font-size: 12px; 
    font-weight: 600; 
    color: #fff; 
}

.congestion-info.busy { background-color: rgba(255, 77, 109, 0.8); }
.congestion-info.normal { background-color: rgba(252, 196, 25, 0.8); }
.congestion-info.free { background-color: rgba(46, 204, 113, 0.8); }

.map-container { 
    flex: 1; 
    background-color: #e5e7eb; 
}

.map-container iframe { 
    width: 100%; 
    height: 100%; 
    border: none; 
}

/* Action Labels */
.action-label { 
    position: absolute; 
    font-size: 1.8rem; 
    font-weight: 700; 
    color: white; 
    opacity: 0; 
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
    z-index: 1; 
    padding: 1rem 2rem; 
    border-radius: 50px; 
    text-shadow: 1px 1px 4px rgba(0,0,0,0.5); 
    white-space: nowrap; 
    pointer-events: none; 
    will-change: opacity, transform;
    background: rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.action-label.visible {
    transform: scale(1.1);
}

#swipe-label-like, #discovery-label-like { 
    top: 50%; 
    right: 20px; 
    transform: translateY(-50%) rotate(15deg); 
    background-color: var(--like-color); 
}

#swipe-label-dislike, #discovery-label-dislike { 
    top: 50%; 
    left: 20px; 
    transform: translateY(-50%) rotate(-15deg); 
    background-color: var(--dislike-color); 
}

#swipe-label-visited, #discovery-label-visited { 
    top: 25%; 
    left: 50%; 
    transform: translate(-50%, -50%); 
    background-color: rgba(252, 196, 25, 0.8); 
}

/* Footer & Navigation */
.footer-nav { 
    position: fixed; 
    bottom: 0; 
    left: 0; 
    width: 100%; 
    background: #FFFFFF; 
    padding: 12px 20px; 
    display: flex; 
    justify-content: space-around; 
    align-items: center; 
    box-shadow: 0 -2px 10px rgba(0,0,0,0.05); 
    border-top: 1px solid #f0f0f0; 
    padding-bottom: calc(12px + env(safe-area-inset-bottom)); 
    z-index: 100; 
}

.nav-btn { 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    border: none; 
    background: transparent; 
    color: #808080; 
    cursor: pointer; 
    transition: all var(--transition-fast) ease; 
    padding: 8px 4px; 
    min-width: 60px; 
    gap: 4px; 
}

.nav-btn svg { 
    width: 24px; 
    height: 24px; 
    transition: all var(--transition-fast) ease; 
}

.nav-label { 
    font-size: 11px; 
    font-weight: 500; 
    line-height: 1; 
    transition: all var(--transition-fast) ease; 
}

.nav-btn.is-active-nav { 
    color: var(--main-color); 
}

.nav-btn.is-active-nav svg { 
    stroke: var(--main-color); 
}

.nav-btn.is-active-nav .nav-label { 
    color: var(--main-color); 
}

.nav-btn:hover { 
    color: var(--main-color); 
}

.nav-btn:hover svg { 
    stroke: var(--main-color); 
}

.nav-btn:hover .nav-label { 
    color: var(--main-color); 
}

/* Swipe Actions */
.swipe-actions { 
    position: fixed; 
    bottom: 80px; 
    left: 50%; 
    transform: translateX(-50%); 
    display: flex; 
    align-items: center; 
    gap: 16px; 
    z-index: 20; 
    opacity: 0; 
    pointer-events: none; 
    transition: opacity var(--transition-medium) ease-in-out; 
}

.action-btn { 
    width: 60px; 
    height: 60px; 
    border-radius: 50%; 
    border: 1px solid #ddd; 
    background-color: var(--card-bg-color); 
    box-shadow: var(--shadow-light); 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    cursor: pointer; 
    transition: all var(--transition-fast) ease; 
}

.action-btn:hover { 
    transform: scale(1.1); 
}

.action-btn:active { 
    transform: scale(0.95); 
    transition: transform 0.1s ease; 
}

#like-btn { 
    color: var(--like-color); 
    width: 72px; 
    height: 72px; 
}

#like-btn svg { 
    transition: transform var(--transition-fast) ease-in-out; 
    width: 28px !important;
    height: 28px !important;
    max-width: 28px !important;
    max-height: 28px !important;
    min-width: 28px !important;
    min-height: 28px !important;
}

#like-btn:hover svg { 
    transform: scale(1.15); 
}

#like-btn:active svg { 
    transform: scale(0.9); 
}

#dislike-btn { 
    color: var(--dislike-color); 
}

/* より強力なセレクタでボタンサイズを制御 */
.swipe-actions #dislike-btn svg,
#dislike-btn svg {
    width: 28px !important;
    height: 28px !important;
    max-width: 28px !important;
    max-height: 28px !important;
    min-width: 28px !important;
    min-height: 28px !important;
}

#visited-btn { 
    color: var(--visited-color); 
}

.swipe-actions #visited-btn svg,
#visited-btn svg {
    width: 36px !important;
    height: 36px !important;
    max-width: 36px !important;
    max-height: 36px !important;
    min-width: 36px !important;
    min-height: 36px !important;
}

/* Common Components */
.container-vertical { 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    text-align: center; 
    width: 100%; 
    max-width: 500px; 
    padding: 20px; 
    height: 100%; 
}

.main-label { 
    font-size: 28px; 
    font-weight: 700; 
    margin-bottom: 8px; 
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.celebration-icon {
    width: 36px;
    height: 36px;
    color: #ff6b6b;
    animation: celebration-bounce 2.5s ease-in-out infinite;
    filter: drop-shadow(0 2px 8px rgba(255, 107, 107, 0.3));
}

@keyframes celebration-bounce {
    0%, 100% { 
        transform: scale(1) rotate(0deg); 
        filter: drop-shadow(0 2px 8px rgba(255, 107, 107, 0.3));
    }
    25% { 
        transform: scale(1.15) rotate(-8deg); 
        filter: drop-shadow(0 4px 12px rgba(255, 107, 107, 0.4));
    }
    50% { 
        transform: scale(1.25) rotate(0deg); 
        filter: drop-shadow(0 6px 16px rgba(255, 107, 107, 0.5));
    }
    75% { 
        transform: scale(1.15) rotate(8deg); 
        filter: drop-shadow(0 4px 12px rgba(255, 107, 107, 0.4));
    }
}

.confetti-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1000;
    overflow: hidden;
}

.confetti {
    position: absolute;
    width: 8px;
    height: 8px;
    animation: confetti-fall 3s ease-in-out forwards;
    opacity: 0;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.confetti.square {
    border-radius: 2px;
}

.confetti.circle {
    border-radius: 50%;
}

.confetti.triangle {
    width: 0;
    height: 0;
    background: transparent;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-bottom: 8px solid;
}

.confetti.red {
    background: #ff6b6b;
    border-bottom-color: #ff6b6b;
}

.confetti.blue {
    background: #4d9de0;
    border-bottom-color: #4d9de0;
}

.confetti.green {
    background: #6bcf7f;
    border-bottom-color: #6bcf7f;
}

.confetti.yellow {
    background: #ffd93d;
    border-bottom-color: #ffd93d;
}

.confetti.purple {
    background: #a855f7;
    border-bottom-color: #a855f7;
}

.confetti.pink {
    background: #ff69b4;
    border-bottom-color: #ff69b4;
}

.confetti.orange {
    background: #ff8c42;
    border-bottom-color: #ff8c42;
}

@keyframes confetti-fall {
    0% {
        transform: translateY(-20px) rotate(0deg) scale(0.8);
        opacity: 0;
    }
    10% {
        opacity: 1;
        transform: translateY(0px) rotate(45deg) scale(1);
    }
    25% {
        transform: translateY(15vh) rotate(90deg) scale(1.1);
    }
    50% {
        transform: translateY(35vh) rotate(180deg) scale(1);
    }
    75% {
        transform: translateY(65vh) rotate(270deg) scale(0.9);
    }
    90% {
        opacity: 0.8;
    }
    100% {
        transform: translateY(100vh) rotate(360deg) scale(0.8);
        opacity: 0;
    }
}

@keyframes confetti-spin {
    0%, 100% {
        transform: translateX(0px) rotate(0deg);
    }
    25% {
        transform: translateX(30px) rotate(90deg);
    }
    50% {
        transform: translateX(-20px) rotate(180deg);
    }
    75% {
        transform: translateX(15px) rotate(270deg);
    }
}

.confetti-spin {
    animation: confetti-fall 3s ease-in-out forwards, confetti-spin 1.5s ease-in-out infinite;
}

.sub-label { 
    font-size: 16px; 
    color: #808080; 
    margin-top: 0; 
    margin-bottom: 32px; 
}

.main-input { 
    width: 100%; 
    height: 50px; 
    padding: 0 16px; 
    font-size: 18px; 
    border: 1px solid #ddd; 
    border-radius: 8px; 
    margin-bottom: 24px; 
    text-align: center; 
    color: var(--text-color); 
}

.main-input::placeholder { 
    color: #9ca3af; 
}

.main-input:focus { 
    outline: none; 
    border-color: var(--main-color); 
    box-shadow: 0 0 0 2px rgba(255, 212, 0, 0.2); 
}

.main-button { 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    gap: 8px; 
    width: 100%; 
    height: 50px; 
    font-size: 18px; 
    font-weight: 600; 
    color: var(--text-color); 
    background-color: var(--main-color); 
    border: none; 
    border-radius: 12px; 
    cursor: pointer; 
    transition: all var(--transition-fast) ease; 
    box-shadow: 0 4px 15px rgba(255, 212, 0, 0.3); 
}

.main-button:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 6px 20px rgba(255, 212, 0, 0.4); 
}

.main-button:active { 
    transform: translateY(0); 
    box-shadow: 0 2px 10px rgba(255, 212, 0, 0.2); 
}

.secondary-button { 
    background: var(--card-bg-color); 
    color: var(--text-color); 
    border: 1px solid #ddd; 
}

/* Back Button */
#back-to-decision-btn {
    background: transparent;
    color: var(--text-color);
    border: 2px solid var(--main-color);
    font-weight: 600;
    transition: all var(--transition-fast) ease;
}

#back-to-decision-btn:hover {
    background: var(--main-color);
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 212, 0, 0.3);
}

#back-to-decision-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 10px rgba(255, 212, 0, 0.2);
}

/* Check-in Screen */
#check-in-screen main {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
    width: 100%;
}

.check-in-image { 
    width: 150px; 
    height: 150px; 
    border-radius: 50%; 
    background-size: cover; 
    background-position: center; 
    margin: 0 auto 24px; 
    border: 4px solid rgba(255, 255, 255, 0.8); 
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15); 
    background-color: #e0e0e0; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-size: 48px; 
    color: #9ca3af; 
    position: relative;
    overflow: hidden;
}

.icon-display { 
    margin-bottom: 24px; 
    color: var(--text-color); 
}

/* Decision Screen */
#decision-screen main { 
    align-items: flex-start; 
}

.decision-container { 
    width: 100%; 
    max-width: 500px; 
    padding: 20px; 
    height: 100%; 
    display: flex; 
    flex-direction: column; 
    text-align: center; 
}

.decision-list { 
    flex: 1; 
    overflow-y: auto; 
    margin-bottom: 20px; 
}

.decision-item { 
    display: flex; 
    align-items: center; 
    gap: 16px; 
    padding: 16px; 
    background: var(--card-bg-color); 
    border-radius: 12px; 
    margin-bottom: 12px; 
    border: 1px solid #eee; 
    cursor: pointer; 
    text-align: left; 
    opacity: 0; 
    transform: translateY(20px); 
    transition: all var(--transition-medium) ease; 
}

.decision-item:hover { 
    transform: translateY(-4px) scale(1.02); 
    box-shadow: var(--shadow-medium); 
    border-color: var(--main-color); 
}

@keyframes fadeInItem { 
    to { 
        opacity: 1; 
        transform: translateY(0); 
    } 
}

#decision-screen.is-active .decision-item { 
    animation: fadeInItem 0.5s ease-out forwards; 
}

#decision-screen.is-active .decision-item:nth-child(1) { animation-delay: 0.1s; }
#decision-screen.is-active .decision-item:nth-child(2) { animation-delay: 0.15s; }
#decision-screen.is-active .decision-item:nth-child(3) { animation-delay: 0.2s; }
#decision-screen.is-active .decision-item:nth-child(4) { animation-delay: 0.25s; }
#decision-screen.is-active .decision-item:nth-child(5) { animation-delay: 0.3s; }

.decision-item img { 
    width: 60px; 
    height: 60px; 
    border-radius: 8px; 
    object-fit: cover; 
    flex-shrink: 0; 
}

.decision-item-info { 
    flex: 1; 
    min-width: 0; 
}

.decision-item-info h3 { 
    margin: 0 0 4px 0; 
    font-size: 18px; 
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis; 
}

.decision-item-meta { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
}

.decision-item-info p { 
    margin: 0; 
    font-size: 14px; 
    color: #808080; 
}

.decision-congestion { 
    padding: 3px 8px; 
    border-radius: 12px; 
    font-size: 11px; 
    font-weight: 600; 
    color: #fff; 
    flex-shrink: 0; 
}

.decision-congestion.busy { background-color: #ef4444; }
.decision-congestion.normal { background-color: #f59e0b; }
.decision-congestion.free { background-color: #10b981; }

.decision-empty-message {
    text-align: center;
    padding: 40px 20px;
    color: #6b7280;
    font-size: 16px;
}

.decision-empty-message p {
    margin: 0;
}

/* Plan Summary Screen */
#plan-summary-screen main { 
    align-items: flex-start; 
    overflow-y: auto; 
}

.summary-container { 
    display: flex; 
    flex-direction: column; 
    width: 100%; 
    max-width: 500px; 
    padding: 20px; 
    height: auto; 
    text-align: center; 
}

.summary-title-input { 
    width: 100%; 
    border: none; 
    font-size: 24px; 
    font-weight: 600; 
    padding: 12px 16px; 
    margin-bottom: 16px; 
    border: 1px solid #ddd; 
    background: var(--card-bg-color); 
    border-radius: 8px; 
    text-align: center; 
}

.summary-title-input:focus { 
    outline: none; 
    border-color: var(--main-color); 
    box-shadow: 0 0 0 2px rgba(255, 212, 0, 0.2); 
}

.summary-timeline { 
    flex-grow: 1; 
    margin-bottom: 20px; 
    width: 100%; 
    text-align: left; 
    position: relative; 
    padding-left: 20px; 
}

.summary-timeline::before { 
    content: ''; 
    position: absolute; 
    top: 20px; 
    left: 15px; 
    bottom: 20px; 
    width: 2px; 
    background-color: #e0e0e0; 
    z-index: 0; 
}

.summary-item { 
    display: flex; 
    align-items: flex-start; 
    background: var(--card-bg-color); 
    border-radius: 12px; 
    padding: 16px; 
    margin-bottom: 16px; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
    opacity: 0; 
    transform: translateX(-20px); 
    position: relative; 
}

@keyframes slideInItem { 
    to { 
        opacity: 1; 
        transform: translateX(0); 
    } 
}

#plan-summary-screen.is-active .summary-item { 
    animation: slideInItem 0.5s ease-out forwards; 
}

#plan-summary-screen.is-active .summary-item:nth-child(1) { animation-delay: 0.1s; }
#plan-summary-screen.is-active .summary-item:nth-child(2) { animation-delay: 0.15s; }
#plan-summary-screen.is-active .summary-item:nth-child(3) { animation-delay: 0.2s; }
#plan-summary-screen.is-active .summary-item:nth-child(4) { animation-delay: 0.25s; }
#plan-summary-screen.is-active .summary-item:nth-child(5) { animation-delay: 0.3s; }

.summary-item-step { 
    font-size: 16px; 
    font-weight: 700; 
    color: #fff; 
    background-color: var(--main-color); 
    border: 2px solid #f0f2f5; 
    border-radius: 50%; 
    width: 32px; 
    height: 32px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    position: absolute; 
    top: 18px; 
    left: -34px; 
    z-index: 1; 
}

/* しおりUI用のスタイル */
.summary-item-bookmark {
    position: relative;
    margin-right: 16px;
    flex-shrink: 0;
}

.bookmark-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--main-color), #ffed4e);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(255, 212, 0, 0.3);
}

.bookmark-icon svg {
    width: 24px;
    height: 24px;
    color: white;
}

.bookmark-number {
    position: absolute;
    top: -8px;
    right: -8px;
    background: var(--accent-color);
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 700;
    box-shadow: 0 2px 8px rgba(249, 67, 68, 0.3);
}

.summary-item-image-container {
    position: relative;
    margin-right: 16px;
    flex-shrink: 0;
}

.summary-item-image-container .summary-item-image { 
    width: 120px; 
    height: 120px; 
    border-radius: 12px; 
    object-fit: cover; 
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    margin-right: 0;
}

.image-overlay {
    position: absolute;
    top: 8px;
    right: 8px;
}

.visit-badge {
    background: rgba(46, 204, 113, 0.9);
    color: white;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 10px;
    font-weight: 600;
    backdrop-filter: blur(4px);
}

.summary-item-meta {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 12px;
}

.visit-date, .visit-time {
    font-size: 14px;
    color: #6b7280;
    font-weight: 500;
}

.star-rating-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

.rating-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-color);
}

.summary-item-content { 
    display: flex; 
    width: 100%; 
}

.summary-item-image { 
    width: 60px; 
    height: 60px; 
    border-radius: 8px; 
    object-fit: cover; 
    margin-right: 16px; 
}

.summary-item-details { 
    flex: 1; 
}

.summary-item-name { 
    font-size: 18px; 
    font-weight: 600; 
    margin: 0 0 8px 0; 
}

.star-rating { 
    display: flex; 
    gap: 4px; 
}

.star-rating svg { 
    cursor: pointer; 
    color: #ccc; 
    transition: color var(--transition-fast), transform var(--transition-fast); 
}

.star-rating svg:hover { 
    transform: scale(1.2); 
}

.star-rating svg.filled { 
    color: var(--visited-color); 
}

/* 新規作成時の星評価のスタイルを明示的に定義 */
.summary-item .star-rating-container {
    display: flex !important;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    visibility: visible !important;
    opacity: 1 !important;
}

.summary-item .rating-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-color);
    visibility: visible !important;
    opacity: 1 !important;
}

.summary-item .star-rating {
    display: flex !important;
    gap: 4px;
    visibility: visible !important;
    opacity: 1 !important;
}

.summary-item .star-rating svg {
    width: 20px !important;
    height: 20px !important;
    cursor: pointer;
    color: #ccc;
    transition: color var(--transition-fast), transform var(--transition-fast);
    visibility: visible !important;
    opacity: 1 !important;
    display: block !important;
}

.summary-item .star-rating svg:hover {
    transform: scale(1.2);
}

.summary-item .star-rating svg.filled {
    color: var(--visited-color);
}



.overall-rating-container { 
    background: var(--card-bg-color); 
    border-radius: 12px; 
    padding: 16px; 
    margin-bottom: 20px; 
    text-align: center; 
    opacity: 0; 
    transform: translateY(10px) scale(0.98); 
    transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1); 
    pointer-events: none; 
}

.overall-rating-container.visible { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
    pointer-events: auto; 
}

.overall-rating-container h3 { 
    margin: 0 0 10px 0; 
    font-size: 18px; 
    text-align: center;
}

.overall-rating-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    margin-top: 16px;
}

.overall-stars-container {
    display: flex;
    gap: 4px;
    justify-content: center;
}

#overall-stars-background svg { 
    color: #d1d5db; 
    width: 32px; 
    height: 32px; 
    transition: color var(--transition-fast) ease; 
}

#overall-stars-background svg.filled { 
    color: var(--visited-color); 
}

.overall-rating-number {
    display: flex;
    align-items: center;
    justify-content: center;
}

#overall-rating-value {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-color);
    background: linear-gradient(135deg, var(--visited-color), #ffed4e);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1;
}

.publish-toggle { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    padding: 16px; 
    background: var(--card-bg-color); 
    border-radius: 12px; 
    margin-bottom: 20px; 
    flex-shrink: 0; 
    width: 100%; 
}

.toggle-switch { 
    position: relative; 
    display: inline-block; 
    width: 51px; 
    height: 31px; 
}

.toggle-switch input { 
    opacity: 0; 
    width: 0; 
    height: 0; 
}

.slider { 
    position: absolute; 
    cursor: pointer; 
    top: 0; 
    left: 0; 
    right: 0; 
    bottom: 0; 
    background-color: #ccc; 
    transition: .4s; 
    border-radius: 34px; 
}

.slider:before { 
    position: absolute; 
    content: ""; 
    height: 23px; 
    width: 23px; 
    left: 4px; 
    bottom: 4px; 
    background-color: white; 
    transition: .4s; 
    border-radius: 50%; 
}

input:checked + .slider { 
    background-color: var(--main-color); 
}

input:checked + .slider:before { 
    transform: translateX(20px); 
}

/* My Plans Screen */
#my-plans-screen main { 
    align-items: flex-start; 
    overflow-y: auto; 
}

.my-plans-container { 
    display: flex; 
    flex-direction: column; 
    width: 100%; 
    max-width: 500px; 
    padding: 20px; 
    height: auto; 
}

.my-plans-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    padding: 0 4px;
}

.edit-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background: var(--main-color);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.edit-btn:hover {
    background: #e6c200;
    transform: translateY(-1px);
}

.edit-btn:active {
    transform: translateY(0);
}

.edit-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

.action-btn-small {
    padding: 6px 12px;
    border: 1px solid #ddd;
    background: white;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.action-btn-small:hover {
    background: #f5f5f5;
    border-color: #ccc;
}

.action-btn-small.delete {
    color: #dc3545;
    border-color: #dc3545;
}

.action-btn-small.delete:hover {
    background: #dc3545;
    color: white;
}

.plan-card { 
    display: flex;
    align-items: flex-start;
    background: var(--card-bg-color);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 16px;
    cursor: pointer;
    transition: all var(--transition-medium) ease;
    box-shadow: var(--shadow-light);
    border: 1px solid #f0f0f0;
    position: relative;
}

.plan-card.selectable {
    cursor: default;
}

.plan-card.selectable .plan-card-content {
    padding-left: 40px;
}

.plan-card.selectable::before {
    content: '';
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    border: 2px solid #ddd;
    border-radius: 4px;
    background: white;
    transition: all var(--transition-fast);
}

.plan-card.selectable.selected::before {
    background: var(--main-color);
    border-color: var(--main-color);
}

.plan-card.selectable.selected::after {
    content: '✓';
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.plan-card:hover { 
    transform: translateY(-4px); 
    box-shadow: var(--shadow-medium); 
    border-color: var(--main-color);
}

.plan-card.is-held {
    transform: translateY(-8px) scale(1.02);
    box-shadow: var(--shadow-heavy);
}

.plan-card-image {
    width: 80px;
    height: 80px;
    border-radius: 12px;
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
    margin-right: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.plan-card-content {
    flex: 1;
    min-width: 0;
}

.plan-card-title { 
    font-size: 18px; 
    font-weight: 700; 
    margin: 0 0 6px 0; 
    color: var(--text-color);
    line-height: 1.3;
}

.plan-card-meta { 
    font-size: 14px; 
    color: #666; 
    margin: 0 0 4px 0; 
}

.plan-card-rating { 
    display: flex; 
    align-items: center; 
    gap: 4px; 
    margin: 0 0 4px 0; 
    font-size: 14px; 
    color: #f59e0b; 
    font-weight: 600;
}

.plan-card-rating svg { 
    width: 16px; 
    height: 16px; 
    color: #d1d5db; 
    transition: color var(--transition-fast) ease; 
}

.plan-card-rating svg.filled { 
    color: #fcc419; 
}

.plan-card-date { 
    font-size: 12px; 
    color: #999; 
    margin: 0; 
}

/* Copyright */
.copyright { 
    position: fixed; 
    bottom: 10px; 
    right: 10px; 
    font-size: 12px; 
    background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    z-index: 101; 
    font-weight: 500;
}

